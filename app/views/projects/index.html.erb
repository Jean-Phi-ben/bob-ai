
<!-- Background Vanta -->
<div id="vanta-bg" style="position: fixed; inset: 0; z-index: -1;"></div>

<!-- Dark overlay -->
<div style="
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at top, rgba(15,23,42,0.4), rgba(15,23,42,0.9));
  z-index: 0;
"></div>

<!-- Page content -->
<div style="
  position: relative;
  z-index: 1;
  max-width: 900px;
  margin: 40px auto;
  padding: 0 16px;
  color: white;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
">

  <!-- Header -->
  <div style="
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  ">
    <div>
      <h1 style="font-size: 30px; font-weight: 700; margin-bottom: 4px;">
        My Projects
      </h1>
      <p style="color: #CBD5E1; font-size: 14px; margin: 0;">
        Overview of your ongoing and finished projects.
      </p>
    </div>

    <%= link_to "New project", new_project_path,
          style: "
            padding: 10px 18px;
            background: #4F46E5;
            color: white;
            text-decoration: none;
            border-radius: 999px;
            font-size: 14px;
            font-weight: 600;
          " %>
  </div>

  <!-- ONGOING PROJECTS -->
  <h2 style="font-size: 20px; margin-bottom: 12px;">Ongoing</h2>

  <% if @ongoing_projects.any? %>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; margin-bottom: 32px;">
      <% @ongoing_projects.each do |project| %>
        <div style="
          background: rgba(15,23,42,0.65);
          padding: 16px 18px;
          border-radius: 14px;
          backdrop-filter: blur(6px);
          border: 1px solid rgba(255,255,255,0.12);
        ">
          <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 6px;">
            <%= project.title %>
          </h3>

          <% if project.category.present? %>
            <p style="font-size: 12px; color: #A5B4FC; margin: 0 0 8px;">
              <strong>Category:</strong> <%= project.category %>
            </p>
          <% end %>

          <p style="font-size: 14px; color: #E2E8F0; margin-bottom: 12px;">
            <%= truncate(project.prompt, length: 120) %>
          </p>

          <%= link_to "Open", project_path(project),
                style: "
                  font-size: 13px;
                  color: #818CF8;
                  text-decoration: none;
                  font-weight: 600;
                " %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p style="color: #94A3B8; font-size: 13px; margin-bottom: 32px;">No ongoing projects yet.</p>
  <% end %>

  <!-- FINISHED PROJECTS -->
  <h2 style="font-size: 20px; margin-bottom: 12px;">Finished</h2>

  <% if @finished_projects.any? %>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px;">
      <% @finished_projects.each do |project| %>
        <div style="
          background: rgba(15,23,42,0.5);
          padding: 16px 18px;
          border-radius: 14px;
          backdrop-filter: blur(6px);
          border: 1px solid rgba(255,255,255,0.12);
        ">
          <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 6px;">
            <%= project.title %>
          </h3>

          <% if project.category.present? %>
            <p style="font-size: 12px; color: #A5B4FC; margin: 0 0 8px;">
              <strong>Category:</strong> <%= project.category %>
            </p>
          <% end %>

          <p style="font-size: 14px; color: #E2E8F0; margin-bottom: 12px;">
            <%= truncate(project.prompt, length: 120) %>
          </p>

          <%= link_to "View", project_path(project),
                style: "
                  font-size: 13px;
                  color: #818CF8;
                  text-decoration: none;
                  font-weight: 600;
                " %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p style="color: #94A3B8; font-size: 13px;">No finished projects yet.</p>
  <% end %>

</div>

<!-- VANTA GLOBE SCRIPTS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    if (window.VANTA) {
      window.VANTA.GLOBE({
        el: "#vanta-bg",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        size: 1.70,
        color: 0x7c3aed,
        color2: 0x4f46e5
      });
    }
  });
</script>
